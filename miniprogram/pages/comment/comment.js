"use strict";
Page({
    data: {
        value: {},
        starList: [
            { name: '活动评价', key: 'active', star: 5 },
            { name: '主办方评价', key: 'sponsor', star: 5 },
            { name: '参加人员', key: 'participant', star: 5 }
        ]
    },
    onLoad: function (value) {
        value && this.setData({ value: value });
    },
    none: function () {
    },
    score: function (e) {
        var _a;
        var star = e.target.dataset.star;
        if (star != null) {
            this.setData((_a = {}, _a["starList[" + e.currentTarget.dataset.index + "].star"] = star, _a));
        }
    },
    onSubmit: function (e) {
        var value = this.data.value;
        var data = { id: +value.id };
        this.data.starList.forEach(function (v) { return data[v.key] = v.star; });
        var form = e.detail.value;
        data.comment = form.comment;
        data.anonymous = !!form.anonymous.length;
        console.log(data);
        wx.navigateTo({
            url: "comment?id=" + value.id + "&title=" + value.title + "&img=" + value.title + "&authentication=" + value.authentication
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbW1lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQWdCQSxJQUFJLENBQUM7SUFDRCxJQUFJLEVBQUU7UUFDRixLQUFLLEVBQVcsRUFBRTtRQUNsQixRQUFRLEVBQUU7WUFDTixFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFO1lBQ3hDLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUU7WUFDMUMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRTtTQUNoRDtLQUNKO0lBQ0QsTUFBTSxZQUFDLEtBQWlCO1FBQ3BCLEtBQUssSUFBSSxJQUFJLENBQUMsT0FBUSxDQUFDLEVBQUUsS0FBSyxPQUFBLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFDRCxJQUFJO0lBRUosQ0FBQztJQUNELEtBQUssWUFBQyxDQUFlOztRQUNqQixJQUFNLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDbkMsSUFBSSxJQUFJLElBQUksSUFBSSxFQUFFO1lBQ2QsSUFBSSxDQUFDLE9BQVEsV0FBRyxHQUFDLGNBQVksQ0FBQyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsS0FBSyxXQUFRLElBQUcsSUFBSSxNQUFHLENBQUM7U0FDaEY7SUFDTCxDQUFDO0lBQ0QsUUFBUSxZQUFDLENBQVk7UUFDakIsSUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFFOUIsSUFBTSxJQUFJLEdBQWdCLEVBQUUsRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxDQUFDO1FBQzVDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxVQUFBLENBQUMsSUFBSSxPQUFBLElBQUksQ0FBVSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBN0IsQ0FBNkIsQ0FBQyxDQUFDO1FBRS9ELElBQU0sSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQzVCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQztRQUV6QyxPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWxCLEVBQUUsQ0FBQyxVQUFVLENBQUM7WUFDVixHQUFHLEVBQUUsZ0JBQWMsS0FBSyxDQUFDLEVBQUUsZUFBVSxLQUFLLENBQUMsS0FBSyxhQUFRLEtBQUssQ0FBQyxLQUFLLHdCQUFtQixLQUFLLENBQUMsY0FBZ0I7U0FDL0csQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImludGVyZmFjZSBJQWN0aXZlIHtcclxuICAgIGltZzogc3RyaW5nO1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIGF1dGhlbnRpY2F0aW9uOiBzdHJpbmc7XHJcbiAgICBpZDogbnVtYmVyO1xyXG59XHJcbmludGVyZmFjZSBDb21tZW50RGF0YSB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgYWN0aXZlOiBudW1iZXI7XHJcbiAgICBzcG9uc29yOiBudW1iZXI7XHJcbiAgICBwYXJ0aWNpcGFudDogbnVtYmVyO1xyXG4gICAgYW5vbnltb3VzOiBib29sZWFuLFxyXG4gICAgY29tbWVudDogc3RyaW5nO1xyXG59XHJcbnR5cGUgc3RhcktleSA9ICdhY3RpdmUnIHwgJ3Nwb25zb3InIHwgJ3BhcnRpY2lwYW50JztcclxuXHJcblBhZ2Uoe1xyXG4gICAgZGF0YToge1xyXG4gICAgICAgIHZhbHVlOiA8SUFjdGl2ZT57fSxcclxuICAgICAgICBzdGFyTGlzdDogW1xyXG4gICAgICAgICAgICB7IG5hbWU6ICfmtLvliqjor4Tku7cnLCBrZXk6ICdhY3RpdmUnLCBzdGFyOiA1IH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ+S4u+WKnuaWueivhOS7tycsIGtleTogJ3Nwb25zb3InLCBzdGFyOiA1IH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ+WPguWKoOS6uuWRmCcsIGtleTogJ3BhcnRpY2lwYW50Jywgc3RhcjogNSB9XHJcbiAgICAgICAgXVxyXG4gICAgfSxcclxuICAgIG9uTG9hZCh2YWx1ZTogSUFueU9iamVjdCkge1xyXG4gICAgICAgIHZhbHVlICYmIHRoaXMuc2V0RGF0YSEoeyB2YWx1ZSB9KTtcclxuICAgIH0sXHJcbiAgICBub25lKCkge1xyXG4gICAgICAgIC8vXHJcbiAgICB9LFxyXG4gICAgc2NvcmUoZTogV3hUb3VjaEV2ZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc3RhciA9IGUudGFyZ2V0LmRhdGFzZXQuc3RhcjtcclxuICAgICAgICBpZiAoc3RhciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSEoeyBbYHN0YXJMaXN0WyR7ZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXh9XS5zdGFyYF06IHN0YXIgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uU3VibWl0KGU6IEJhc2VFdmVudCkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5kYXRhLnZhbHVlO1xyXG5cclxuICAgICAgICBjb25zdCBkYXRhID0gPENvbW1lbnREYXRhPnsgaWQ6ICt2YWx1ZS5pZCB9O1xyXG4gICAgICAgIHRoaXMuZGF0YS5zdGFyTGlzdC5mb3JFYWNoKHYgPT4gZGF0YVs8c3RhcktleT52LmtleV0gPSB2LnN0YXIpO1xyXG5cclxuICAgICAgICBjb25zdCBmb3JtID0gZS5kZXRhaWwudmFsdWU7XHJcbiAgICAgICAgZGF0YS5jb21tZW50ID0gZm9ybS5jb21tZW50O1xyXG4gICAgICAgIGRhdGEuYW5vbnltb3VzID0gISFmb3JtLmFub255bW91cy5sZW5ndGg7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG5cclxuICAgICAgICB3eC5uYXZpZ2F0ZVRvKHtcclxuICAgICAgICAgICAgdXJsOiBgY29tbWVudD9pZD0ke3ZhbHVlLmlkfSZ0aXRsZT0ke3ZhbHVlLnRpdGxlfSZpbWc9JHt2YWx1ZS50aXRsZX0mYXV0aGVudGljYXRpb249JHt2YWx1ZS5hdXRoZW50aWNhdGlvbn1gXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=