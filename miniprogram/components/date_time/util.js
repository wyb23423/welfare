"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function getLayoutData(layout, time) {
    var layoutData = [];
    var argObj = getArgObj(time);
    layout.split(',').forEach(function (v) {
        var key = v.trim();
        var arg = argObj[key];
        if (arg) {
            layoutData.push(createDateArr(arg[0], arg[1], arg[2]));
            delete argObj[key];
        }
    });
    return layoutData;
}
exports.getLayoutData = getLayoutData;
function calcSelIndex(layoutData, time) {
    var date = time ? new Date(time) : new Date();
    return layoutData.map(function (v) {
        return v.findIndex(function (item) {
            var _a = item.match(/(\d+)([^\d]){1}/), num = _a[1], unit = _a[2];
            switch (unit) {
                case '年':
                    return +num === date.getFullYear();
                case '月':
                    return +num === date.getMonth() + 1;
                case '日':
                    return +num === date.getDate();
                case '时':
                    return +num === date.getHours();
                case '分':
                    return +num === date.getMinutes();
                case '秒':
                    return +num === date.getSeconds();
                default: return true;
            }
        });
    });
}
exports.calcSelIndex = calcSelIndex;
function formatTime(layout, timeStamp) {
    if (!timeStamp) {
        return '';
    }
    var date = new Date(timeStamp);
    var dateArr = [];
    if (layout.includes('year')) {
        dateArr.push(date.getFullYear());
    }
    if (layout.includes('month')) {
        dateArr.push(fixed2Len(date.getMonth() + 1));
    }
    if (layout.includes('day')) {
        dateArr.push(fixed2Len(date.getDate()));
    }
    var timeArr = [];
    if (layout.includes('hours')) {
        timeArr.push(fixed2Len(date.getHours()));
    }
    if (layout.includes('minutes')) {
        timeArr.push(fixed2Len(date.getMinutes()));
    }
    if (layout.includes('seconds')) {
        timeArr.push(fixed2Len(date.getSeconds()));
    }
    return (dateArr.join('/') + " " + timeArr.join(':')).trim();
}
exports.formatTime = formatTime;
function createDateArr(count, unit, start) {
    if (start === void 0) { start = 1; }
    return new Array(count).fill(start).map(function (v, i) { return fixed2Len(v + i) + unit; });
}
function fixed2Len(num) {
    return num.toString().padStart(2, '0');
}
function getArgObj(time) {
    var date = time ? new Date(+time) : new Date();
    var year = date.getFullYear();
    return {
        year: [20, '年', year - 9],
        month: [12, '月'],
        day: [new Date(year, date.getMonth() + 1, 0).getDate(), '日'],
        hours: [24, '时', 0],
        minutes: [60, '分', 0],
        seconds: [60, '秒', 0]
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFRQSxTQUFnQixhQUFhLENBQUMsTUFBYyxFQUFFLElBQWE7SUFDdkQsSUFBTSxVQUFVLEdBQWUsRUFBRSxDQUFDO0lBQ2xDLElBQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUUvQixNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFBLENBQUM7UUFDdkIsSUFBTSxHQUFHLEdBQWdCLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNsQyxJQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxHQUFHLEVBQUU7WUFDTCxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFzQixHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzNGLE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1NBQ3RCO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLFVBQVUsQ0FBQztBQUN0QixDQUFDO0FBZEQsc0NBY0M7QUFHRCxTQUFnQixZQUFZLENBQUMsVUFBc0IsRUFBRSxJQUFhO0lBQzlELElBQU0sSUFBSSxHQUFTLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUM7SUFFdEQsT0FBTyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQUEsQ0FBQztRQUNuQixPQUFPLENBQUMsQ0FBQyxTQUFTLENBQUMsVUFBQSxJQUFJO1lBQ2IsSUFBQSxrQ0FBdUQsRUFBcEQsV0FBRyxFQUFFLFlBQStDLENBQUM7WUFDOUQsUUFBUSxJQUFJLEVBQUU7Z0JBQ1YsS0FB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QUMsQ0FBQztBQUMvRSxDQUFDO0FBRUQsU0FBUyxTQUFTLENBQUMsR0FBVztJQUMxQixPQUFPLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQzNDLENBQUM7QUFFRCxTQUFTLFNBQVMsQ0FBQyxJQUFhO0lBQzVCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLEVBQUUsQ0FBQztJQUNqRCxJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFFaEMsT0FBTztRQUNILElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUN6QixLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDO1FBQ2hCLEdBQUcsRUFBRSxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxFQUFFLEdBQUcsQ0FBQztRQUM1RCxLQUFLLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUNuQixPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUNyQixPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQztLQUN4QixDQUFDO0FBQ04sQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiDml7bpl7TojIPlm7TpgInmi6nlmajnu4Tku7ZcclxuICog5bel5YW35Ye95pWwXHJcbiAqL1xyXG5cclxudHlwZSBEYXRlVGltZUtleSA9ICd5ZWFyJyB8ICdtb250aCcgfCAnZGF5JyB8ICdob3VycycgfCAnbWludXRlcycgfCAnc2Vjb25kcyc7XHJcblxyXG4vLyDmoLnmja7luIPlsYDlrZfnrKbkuLLojrflj5blkITpobnpgInpobnmlbDmja5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExheW91dERhdGEobGF5b3V0OiBzdHJpbmcsIHRpbWU/OiBudW1iZXIpIHtcclxuICAgIGNvbnN0IGxheW91dERhdGE6IHN0cmluZ1tdW10gPSBbXTtcclxuICAgIGNvbnN0IGFyZ09iaiA9IGdldEFyZ09iaih0aW1lKTtcclxuXHJcbiAgICBsYXlvdXQuc3BsaXQoJywnKS5mb3JFYWNoKHYgPT4ge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IDxEYXRlVGltZUtleT52LnRyaW0oKTtcclxuICAgICAgICBjb25zdCBhcmcgPSBhcmdPYmpba2V5XTtcclxuICAgICAgICBpZiAoYXJnKSB7XHJcbiAgICAgICAgICAgIGxheW91dERhdGEucHVzaChjcmVhdGVEYXRlQXJyKDxudW1iZXI+YXJnWzBdLCA8c3RyaW5nPmFyZ1sxXSwgPG51bWJlciB8IHVuZGVmaW5lZD5hcmdbMl0pKTtcclxuICAgICAgICAgICAgZGVsZXRlIGFyZ09ialtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBsYXlvdXREYXRhO1xyXG59XHJcblxyXG4vLyDmoLnmja7ml7bpl7TmiLPorqHnrpflkITpobnpgInkuK3ntKLlvJVcclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGNTZWxJbmRleChsYXlvdXREYXRhOiBzdHJpbmdbXVtdLCB0aW1lPzogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRlOiBEYXRlID0gdGltZSA/IG5ldyBEYXRlKHRpbWUpIDogbmV3IERhdGUoKTtcclxuXHJcbiAgICByZXR1cm4gbGF5b3V0RGF0YS5tYXAodiA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHYuZmluZEluZGV4KGl0ZW0gPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBbLCBudW0sIHVuaXRdID0gPHN0cmluZ1tdPml0ZW0ubWF0Y2goLyhcXGQrKShbXlxcZF0pezF9Lyk7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodW5pdCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn5bm0JzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gK251bSA9PT0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn5pyIJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gK251bSA9PT0gZGF0ZS5nZXRNb250aCgpICsgMTtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ+aXpSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICtudW0gPT09IGRhdGUuZ2V0RGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn5pe2JzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gK251bSA9PT0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAn5YiGJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gK251bSA9PT0gZGF0ZS5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgICAgICAgICBjYXNlICfnp5InOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiArbnVtID09PSBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFRpbWUobGF5b3V0OiBzdHJpbmcsIHRpbWVTdGFtcD86IG51bWJlcikge1xyXG4gICAgaWYgKCF0aW1lU3RhbXApIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUodGltZVN0YW1wKTtcclxuXHJcbiAgICBjb25zdCBkYXRlQXJyID0gW107XHJcbiAgICBpZiAobGF5b3V0LmluY2x1ZGVzKCd5ZWFyJykpIHtcclxuICAgICAgICBkYXRlQXJyLnB1c2goZGF0ZS5nZXRGdWxsWWVhcigpKTtcclxuICAgIH1cclxuICAgIGlmIChsYXlvdXQuaW5jbHVkZXMoJ21vbnRoJykpIHtcclxuICAgICAgICBkYXRlQXJyLnB1c2goZml4ZWQyTGVuKGRhdGUuZ2V0TW9udGgoKSArIDEpKTtcclxuICAgIH1cclxuICAgIGlmIChsYXlvdXQuaW5jbHVkZXMoJ2RheScpKSB7XHJcbiAgICAgICAgZGF0ZUFyci5wdXNoKGZpeGVkMkxlbihkYXRlLmdldERhdGUoKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHRpbWVBcnIgPSBbXTtcclxuICAgIGlmIChsYXlvdXQuaW5jbHVkZXMoJ2hvdXJzJykpIHtcclxuICAgICAgICB0aW1lQXJyLnB1c2goZml4ZWQyTGVuKGRhdGUuZ2V0SG91cnMoKSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxheW91dC5pbmNsdWRlcygnbWludXRlcycpKSB7XHJcbiAgICAgICAgdGltZUFyci5wdXNoKGZpeGVkMkxlbihkYXRlLmdldE1pbnV0ZXMoKSkpO1xyXG4gICAgfVxyXG4gICAgaWYgKGxheW91dC5pbmNsdWRlcygnc2Vjb25kcycpKSB7XHJcbiAgICAgICAgdGltZUFyci5wdXNoKGZpeGVkMkxlbihkYXRlLmdldFNlY29uZHMoKSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBgJHtkYXRlQXJyLmpvaW4oJy8nKX0gJHt0aW1lQXJyLmpvaW4oJzonKX1gLnRyaW0oKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURhdGVBcnIoY291bnQ6IG51bWJlciwgdW5pdDogc3RyaW5nLCBzdGFydDogbnVtYmVyID0gMSkge1xyXG4gICAgcmV0dXJuIG5ldyBBcnJheShjb3VudCkuZmlsbChzdGFydCkubWFwKCh2LCBpKSA9PiBmaXhlZDJMZW4odiArIGkpICsgdW5pdCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpeGVkMkxlbihudW06IG51bWJlcikge1xyXG4gICAgcmV0dXJuIG51bS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEFyZ09iaih0aW1lPzogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBkYXRlID0gdGltZSA/IG5ldyBEYXRlKCt0aW1lKSA6IG5ldyBEYXRlKCk7XHJcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeWVhcjogWzIwLCAn5bm0JywgeWVhciAtIDldLFxyXG4gICAgICAgIG1vbnRoOiBbMTIsICfmnIgnXSxcclxuICAgICAgICBkYXk6IFtuZXcgRGF0ZSh5ZWFyLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAwKS5nZXREYXRlKCksICfml6UnXSxcclxuICAgICAgICBob3VyczogWzI0LCAn5pe2JywgMF0sXHJcbiAgICAgICAgbWludXRlczogWzYwLCAn5YiGJywgMF0sXHJcbiAgICAgICAgc2Vjb25kczogWzYwLCAn56eSJywgMF1cclxuICAgIH07XHJcbn1cclxuIl19