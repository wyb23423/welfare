"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var index_1 = require("../constant/index");
function formatTime(date) {
    var _a = resolveTime(date), year = _a.year, month = _a.month, day = _a.day, hour = _a.hour, minute = _a.minute;
    return [year, month, day].map(formatNumber).join('/') + ' ' + [hour, minute].map(formatNumber).join(':');
}
exports.formatTime = formatTime;
function resolveTime(time) {
    var date = time instanceof Date ? time : new Date(time);
    var year = date.getFullYear();
    var month = date.getMonth() + 1;
    var day = date.getDate();
    var hour = date.getHours();
    var minute = date.getMinutes();
    return { year: year, month: month, day: day, hour: hour, minute: minute };
}
exports.resolveTime = resolveTime;
function getOptions(path) {
    var page = getCurrentPages().pop();
    if (!(page && page.route === path)) {
        return wx.showModal({
            title: '非法访问',
            content: '路由参数错误，即将返回主页',
            showCancel: false,
            complete: function () {
                wx.reLaunch({ url: '/pages/index/index' });
            }
        });
    }
    return page.options || {};
}
exports.getOptions = getOptions;
function parseData(v, i) {
    if (i === void 0) { i = 0; }
    v.authentication = Reflect.get(index_1.AUTHENTICATION, v.authentication) || '未认证';
    v.originImg = v.img;
    v.img = v.img + '?thumb=true';
    v.sign = v.attended || v.sign || 0;
    v.size = v.size || 0;
    v.index = i;
    v.isCollected = !!v.liked;
    return v;
}
exports.parseData = parseData;
function formatNumber(n) {
    var str = n.toString();
    return str[1] ? str : '0' + str;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBbUQ7QUFFbkQsU0FBZ0IsVUFBVSxDQUFDLElBQVU7SUFDN0IsSUFBQSxzQkFBb0QsRUFBbkQsY0FBSSxFQUFFLGdCQUFLLEVBQUUsWUFBRyxFQUFFLGNBQUksRUFBRSxrQkFBMkIsQ0FBQztJQUMzRCxPQUFPLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzNHLENBQUM7QUFIRCxnQ0FHQztBQUtELFNBQWdCLFdBQVcsQ0FBQyxJQUFtQjtJQUMzQyxJQUFNLElBQUksR0FBRyxJQUFJLFlBQVksSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRTFELElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNoQyxJQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2xDLElBQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMzQixJQUFNLElBQUksR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7SUFDN0IsSUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBRWpDLE9BQU8sRUFBQyxJQUFJLE1BQUEsRUFBRSxLQUFLLE9BQUEsRUFBRSxHQUFHLEtBQUEsRUFBRSxJQUFJLE1BQUEsRUFBRSxNQUFNLFFBQUEsRUFBQyxDQUFDO0FBQzVDLENBQUM7QUFWRCxrQ0FVQztBQUtELFNBQWdCLFVBQVUsQ0FBQyxJQUFZO0lBQ3JDLElBQU0sSUFBSSxHQUFHLGVBQWUsRUFBbUIsQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUN0RCxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLEtBQUssS0FBSyxJQUFJLENBQUMsRUFBRTtRQUNsQyxPQUFPLEVBQUUsQ0FBQyxTQUFTLENBQUM7WUFDbEIsS0FBSyxFQUFFLE1BQU07WUFDYixPQUFPLEVBQUUsZUFBZTtZQUN4QixVQUFVLEVBQUUsS0FBSztZQUNqQixRQUFRO2dCQUNOLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxHQUFHLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO1lBQzdDLENBQUM7U0FDRixDQUFDLENBQUM7S0FDSjtJQUVELE9BQU8sSUFBSSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUM7QUFDNUIsQ0FBQztBQWRELGdDQWNDO0FBT0QsU0FBZ0IsU0FBUyxDQUE2QyxDQUFJLEVBQUUsQ0FBYTtJQUFiLGtCQUFBLEVBQUEsS0FBYTtJQUN2RixDQUFDLENBQUMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsc0JBQWMsRUFBRSxDQUFDLENBQUMsY0FBYyxDQUFDLElBQUksS0FBSyxDQUFDO0lBRTFFLENBQUMsQ0FBQyxTQUFTLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUNwQixDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsYUFBYSxDQUFDO0lBQzlCLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLFFBQVEsSUFBSSxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQztJQUNuQyxDQUFDLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO0lBQ1osQ0FBQyxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztJQUUxQixPQUFPLENBQUMsQ0FBQztBQUNYLENBQUM7QUFYRCw4QkFXQztBQUVELFNBQVMsWUFBWSxDQUFDLENBQVM7SUFDN0IsSUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQ3pCLE9BQU8sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUM7QUFDbEMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFVVEhFTlRJQ0FUSU9OIH0gZnJvbSAnLi4vY29uc3RhbnQvaW5kZXgnO1xuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VGltZShkYXRlOiBEYXRlKTogc3RyaW5nIHtcbiAgY29uc3Qge3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZX0gPSByZXNvbHZlVGltZShkYXRlKTtcbiAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5tYXAoZm9ybWF0TnVtYmVyKS5qb2luKCcvJykgKyAnICcgKyBbaG91ciwgbWludXRlXS5tYXAoZm9ybWF0TnVtYmVyKS5qb2luKCc6Jyk7XG59XG5cbi8qKlxuICog5bCG5pe26Ze05YiG6Kej5Li6IOW5tOaciOaXpe+8jOaXtuWIhuenklxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVRpbWUodGltZTogbnVtYmVyIHwgRGF0ZSkge1xuICAgIGNvbnN0IGRhdGUgPSB0aW1lIGluc3RhbmNlb2YgRGF0ZSA/IHRpbWUgOiBuZXcgRGF0ZSh0aW1lKTtcblxuICAgIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgY29uc3QgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIGNvbnN0IGRheSA9IGRhdGUuZ2V0RGF0ZSgpO1xuICAgIGNvbnN0IGhvdXIgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgY29uc3QgbWludXRlID0gZGF0ZS5nZXRNaW51dGVzKCk7XG5cbiAgICByZXR1cm4ge3llYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZX07XG59XG5cbi8qKlxuICog6I635Y+W5b2T5YmN6aG16Z2i6Lev55Sx5Y+C5pWwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcHRpb25zKHBhdGg6IHN0cmluZykge1xuICBjb25zdCBwYWdlID0gZ2V0Q3VycmVudFBhZ2VzPElBbnlPYmplY3QsIGFueT4oKS5wb3AoKTtcbiAgaWYgKCEocGFnZSAmJiBwYWdlLnJvdXRlID09PSBwYXRoKSkge1xuICAgIHJldHVybiB3eC5zaG93TW9kYWwoe1xuICAgICAgdGl0bGU6ICfpnZ7ms5Xorr/pl64nLFxuICAgICAgY29udGVudDogJ+i3r+eUseWPguaVsOmUmeivr++8jOWNs+Wwhui/lOWbnuS4u+mhtScsXG4gICAgICBzaG93Q2FuY2VsOiBmYWxzZSxcbiAgICAgIGNvbXBsZXRlKCkge1xuICAgICAgICB3eC5yZUxhdW5jaCh7IHVybDogJy9wYWdlcy9pbmRleC9pbmRleCcgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcGFnZS5vcHRpb25zIHx8IHt9O1xufVxuXG4vKipcbiAqIOWwhuS7juacjeWKoeWZqOiOt+WPlueahOaVsOaNruWkhOeQhuaIkOmcgOimgeeahOaVsOaNruagvOW8j1xuICogQHBhcmFtIHYg5rqQ5pWw5o2uXG4gKiBAcGFyYW0gaSDmupDmlbDmja7lnKjmlbDmja7liJfooajkuK3nmoTntKLlvJVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlRGF0YTxUIGV4dGVuZHMgSUFjdGl2ZSB8IElDb21tb2RpdHkgfCBJTWVyY2hhbnQ+KHY6IFQsIGk6IG51bWJlciA9IDApOiBUIHtcbiAgdi5hdXRoZW50aWNhdGlvbiA9IFJlZmxlY3QuZ2V0KEFVVEhFTlRJQ0FUSU9OLCB2LmF1dGhlbnRpY2F0aW9uKSB8fCAn5pyq6K6k6K+BJztcblxuICB2Lm9yaWdpbkltZyA9IHYuaW1nOyAvLyDkv53lrZjljp/lp4vlm77niYdcbiAgdi5pbWcgPSB2LmltZyArICc/dGh1bWI9dHJ1ZSc7IC8vIOiOt+WPluWOi+e8qeWbvueJh+i3r+W+hFxuICB2LnNpZ24gPSB2LmF0dGVuZGVkIHx8IHYuc2lnbiB8fCAwOyAvLyDorr7nva7lt7LlhZHmjaIv5Y+C5Yqg6buY6K6k5YC8XG4gIHYuc2l6ZSA9IHYuc2l6ZSB8fCAwOyAvLyDorr7nva7lj6/lhZHmjaIv5Y+C5Yqg6buY6K6k5YC8XG4gIHYuaW5kZXggPSBpOyAvLyDorr7nva7ntKLlvJVcbiAgdi5pc0NvbGxlY3RlZCA9ICEhdi5saWtlZDsgLy8g6L2s5YyW5piv5ZCm5pS26JePL+WFs+azqOWtl+auteWQjSjor6XlrZfmrrXmmK/liY3nq6/lrozmiJDlkI7mnI3liqHnq6/miY3lnKjov5Tlm57mlbDmja7kuK3mt7vliqDnmoQpXG5cbiAgcmV0dXJuIHY7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE51bWJlcihuOiBudW1iZXIpIHtcbiAgY29uc3Qgc3RyID0gbi50b1N0cmluZygpO1xuICByZXR1cm4gc3RyWzFdID8gc3RyIDogJzAnICsgc3RyO1xufVxuIl19