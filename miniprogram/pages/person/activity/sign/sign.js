"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var status_1 = require("../../../../constant/status");
var http_1 = require("../../../../utils/http");
Page({
    id: 0,
    data: {
        auditing: [],
        join: [],
        refuse: [],
        STATUS: {
            AUDITING: status_1.SIGN_STATUS.AUDITING,
            AWAIT: status_1.SIGN_STATUS.AWAIT,
            JOINING: status_1.SIGN_STATUS.JOINING,
            REFUSE: status_1.SIGN_STATUS.REFUSE
        },
        canSign: false
    },
    onLoad: function (query) {
        var _this = this;
        var activityId = this.id = +query.id;
        console.log(query.status);
        this.setData({ canSign: +query.status === status_1.ACTIVITY_STATUS.PROGRESS });
        http_1.request({
            url: '/api/activity/participation/auditList',
            data: { activityId: activityId }
        })
            .then(function (_a) {
            var list = _a.data;
            var auditing = [];
            var refuse = [];
            var join = [];
            list.forEach(function (v) {
                switch (v.status) {
                    case status_1.SIGN_STATUS.AUDITING:
                        auditing.push(v);
                        break;
                    case status_1.SIGN_STATUS.REFUSE:
                        refuse.push(v);
                        break;
                    case status_1.SIGN_STATUS.AWAIT:
                    case status_1.SIGN_STATUS.JOINING:
                        join.push(v);
                        break;
                    default: break;
                }
            });
            _this.setData({ refuse: refuse, auditing: auditing, join: join });
        })
            .catch(console.log);
    },
    doSign: function (_a) {
        var _this = this;
        var index = _a.currentTarget.dataset.index;
        var item = this.data.join[index];
        if (!item) {
            return;
        }
        wx.showModal({
            title: item.name,
            content: '活动签到确认',
            success: function (_a) {
                var confirm = _a.confirm;
                if (!confirm) {
                    return;
                }
                http_1.request({
                    url: '/api/activity/participation/signIn',
                    data: {
                        activityId: _this.id,
                        user: item.userId
                    }
                })
                    .then(function () {
                    var _a;
                    return _this.setData((_a = {},
                        _a["join[" + index + "].status"] = status_1.SIGN_STATUS.JOINING,
                        _a));
                })
                    .then(function () { return wx.showToast({ title: '签到成功' }); })
                    .catch(console.log);
            }
        });
    },
    doAuit: function (e) {
        var _this = this;
        var isOk = !!e.target.dataset.ok;
        var index = e.currentTarget.dataset.index;
        wx.showModal({
            title: this.data.auditing[index].name,
            content: (!isOk ? '拒绝' : '同意') + '该用户参加该活动?',
            success: function (_a) {
                var confirm = _a.confirm;
                return confirm && _this._doAuit(isOk, index);
            }
        });
    },
    _doAuit: function (isOk, index) {
        var _this = this;
        var _a = this.data, auditing = _a.auditing, refuse = _a.refuse, join = _a.join;
        http_1.request({
            url: '/api/activity/participation/audit',
            data: {
                flag: isOk,
                activityId: this.id,
                userId: auditing[index].userId
            }
        })
            .then(function () {
            wx.showToast({ title: '操作成功' });
            var item = auditing.splice(index, 1)[0];
            item.status = isOk ? status_1.SIGN_STATUS.AWAIT : status_1.SIGN_STATUS.REFUSE;
            (isOk ? join : refuse).push(item);
            _this.setData({ auditing: auditing, join: join, refuse: refuse });
        })
            .catch(console.log);
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lnbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNpZ24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxzREFBMkU7QUFDM0UsK0NBQWlEO0FBVWpELElBQUksQ0FBQztJQUNELEVBQUUsRUFBRSxDQUFDO0lBQ0wsSUFBSSxFQUFFO1FBQ0YsUUFBUSxFQUFZLEVBQUU7UUFDdEIsSUFBSSxFQUFZLEVBQUU7UUFDbEIsTUFBTSxFQUFZLEVBQUU7UUFDcEIsTUFBTSxFQUFFO1lBQ0osUUFBUSxFQUFFLG9CQUFXLENBQUMsUUFBUTtZQUM5QixLQUFLLEVBQUUsb0JBQVcsQ0FBQyxLQUFLO1lBQ3hCLE9BQU8sRUFBRSxvQkFBVyxDQUFDLE9BQU87WUFDNUIsTUFBTSxFQUFFLG9CQUFXLENBQUMsTUFBTTtTQUM3QjtRQUNELE9BQU8sRUFBRSxLQUFLO0tBQ2pCO0lBQ0QsTUFBTSxZQUFDLEtBQW1DO1FBQTFDLGlCQWdDQztRQS9CRyxJQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUN2QyxPQUFPLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBUSxDQUFDLEVBQUMsT0FBTyxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sS0FBSyx3QkFBZSxDQUFDLFFBQVEsRUFBQyxDQUFDLENBQUM7UUFDckUsY0FBTyxDQUFXO1lBQ2QsR0FBRyxFQUFFLHVDQUF1QztZQUM1QyxJQUFJLEVBQUUsRUFBRSxVQUFVLFlBQUEsRUFBRTtTQUN2QixDQUFDO2FBQ0csSUFBSSxDQUFDLFVBQUMsRUFBWTtnQkFBWCxjQUFVO1lBQ2QsSUFBTSxRQUFRLEdBQWEsRUFBRSxDQUFDO1lBQzlCLElBQU0sTUFBTSxHQUFhLEVBQUUsQ0FBQztZQUM1QixJQUFNLElBQUksR0FBYSxFQUFFLENBQUM7WUFFMUIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFBLENB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LGtCQUFNLEVBQUUsY0FBaUIsQ0FBQztRQUUzQyxjQUFPLENBQUM7WUFDSixHQUFHLEVBQUUsbUNBQW1DO1lBQ3hDLElBQUksRUFBRTtnQkFDRixJQUFJLEVBQUUsSUFBSTtnQkFDVixVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUU7Z0JBQ25CLE1BQU0sRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTTthQUNqQztTQUNKLENBQUM7YUFDRCxJQUFJLENBQUM7WUFDRixFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7WUFDL0IsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDMUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLG9CQUFXLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxvQkFBVyxDQUFDLE1BQU0sQ0FBQztZQUM1RCxDQUFDLElBQUksQ0FBRSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkMsS0FBSSxDQUFDLE9BQVEsQ0FBQyxFQUFDLFFBQVEsVUFBQSxFQUFFLElBQUksTUFBQSxFQUFFLE1BQU0sUUFBQSxFQUFDLENBQUMsQ0FBQztRQUM1QyxDQUFDLENBQUM7YUFDRCxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLENBQUM7Q0FDSixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTSUdOX1NUQVRVUywgQUNUSVZJVFlfU1RBVFVTIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29uc3RhbnQvc3RhdHVzJztcclxuaW1wb3J0IHsgcmVxdWVzdCB9IGZyb20gJy4uLy4uLy4uLy4uL3V0aWxzL2h0dHAnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBFbkluZm8ge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgcGhvbmU6IHN0cmluZztcclxuICAgIHVzZXJJZDogc3RyaW5nO1xyXG4gICAgbWFpbDogc3RyaW5nO1xyXG4gICAgc3RhdHVzOiBTSUdOX1NUQVRVUztcclxufVxyXG5cclxuUGFnZSh7XHJcbiAgICBpZDogMCxcclxuICAgIGRhdGE6IHtcclxuICAgICAgICBhdWRpdGluZzogPEVuSW5mb1tdPltdLCAvLyDlvoXlrqHmoLhcclxuICAgICAgICBqb2luOiA8RW5JbmZvW10+W10sIC8vIOWPguWKoOiAheWIl+ihqFxyXG4gICAgICAgIHJlZnVzZTogPEVuSW5mb1tdPltdLCAvLyDlt7Lmi5Lnu51cclxuICAgICAgICBTVEFUVVM6IHtcclxuICAgICAgICAgICAgQVVESVRJTkc6IFNJR05fU1RBVFVTLkFVRElUSU5HLFxyXG4gICAgICAgICAgICBBV0FJVDogU0lHTl9TVEFUVVMuQVdBSVQsXHJcbiAgICAgICAgICAgIEpPSU5JTkc6IFNJR05fU1RBVFVTLkpPSU5JTkcsXHJcbiAgICAgICAgICAgIFJFRlVTRTogU0lHTl9TVEFUVVMuUkVGVVNFXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjYW5TaWduOiBmYWxzZVxyXG4gICAgfSxcclxuICAgIG9uTG9hZChxdWVyeToge2lkOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nfSkge1xyXG4gICAgICAgIGNvbnN0IGFjdGl2aXR5SWQgPSB0aGlzLmlkID0gK3F1ZXJ5LmlkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHF1ZXJ5LnN0YXR1cyk7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhISh7Y2FuU2lnbjogK3F1ZXJ5LnN0YXR1cyA9PT0gQUNUSVZJVFlfU1RBVFVTLlBST0dSRVNTfSk7XHJcbiAgICAgICAgcmVxdWVzdDxFbkluZm9bXT4oe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2FjdGl2aXR5L3BhcnRpY2lwYXRpb24vYXVkaXRMaXN0JyxcclxuICAgICAgICAgICAgZGF0YTogeyBhY3Rpdml0eUlkIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoe2RhdGE6IGxpc3R9KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhdWRpdGluZzogRW5JbmZvW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlZnVzZTogRW5JbmZvW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpvaW46IEVuSW5mb1tdID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgbGlzdC5mb3JFYWNoKHYgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCh2LnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNJR05fU1RBVFVTLkFVRElUSU5HOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXVkaXRpbmcucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFNJR05fU1RBVFVTLlJFRlVTRTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnVzZS5wdXNoKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU0lHTl9TVEFUVVMuQVdBSVQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgU0lHTl9TVEFUVVMuSk9JTklORzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpvaW4ucHVzaCh2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldERhdGEhKHtyZWZ1c2UsIGF1ZGl0aW5nLCBqb2lufSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgICB9LFxyXG4gICAgLy8g562+5YiwXHJcbiAgICBkb1NpZ24oe2N1cnJlbnRUYXJnZXQ6IHtkYXRhc2V0OiB7aW5kZXh9fX06IEJhc2VFdmVudDx7aW5kZXg6IG51bWJlcn0+KSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZGF0YS5qb2luW2luZGV4XTtcclxuICAgICAgICBpZighaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3eC5zaG93TW9kYWwoe1xyXG4gICAgICAgICAgICB0aXRsZTogaXRlbS5uYW1lLFxyXG4gICAgICAgICAgICBjb250ZW50OiAn5rS75Yqo562+5Yiw56Gu6K6kJyxcclxuICAgICAgICAgICAgc3VjY2VzczogKHtjb25maXJtfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYoIWNvbmZpcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2FwaS9hY3Rpdml0eS9wYXJ0aWNpcGF0aW9uL3NpZ25JbicsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eUlkOiB0aGlzLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiBpdGVtLnVzZXJJZFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLnNldERhdGEhKHtcclxuICAgICAgICAgICAgICAgICAgICBbYGpvaW5bJHtpbmRleH1dLnN0YXR1c2BdOiBTSUdOX1NUQVRVUy5KT0lOSU5HXHJcbiAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHd4LnNob3dUb2FzdCh7dGl0bGU6ICfnrb7liLDmiJDlip8nfSkpXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goY29uc29sZS5sb2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgLy8g5oql5ZCN5a6h5qC4XHJcbiAgICBkb0F1aXQoZTogQmFzZUV2ZW50PHtvaz86IHN0cmluZ30sIHtpbmRleDogbnVtYmVyfT4pIHtcclxuICAgICAgICBjb25zdCBpc09rID0gISFlLnRhcmdldC5kYXRhc2V0Lm9rO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaW5kZXg7XHJcblxyXG4gICAgICAgIHd4LnNob3dNb2RhbCh7XHJcbiAgICAgICAgICAgIHRpdGxlOiB0aGlzLmRhdGEuYXVkaXRpbmdbaW5kZXhdLm5hbWUsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6ICghaXNPayA/ICfmi5Lnu50nIDogJ+WQjOaEjycpICsgJ+ivpeeUqOaIt+WPguWKoOivpea0u+WKqD8nLFxyXG4gICAgICAgICAgICBzdWNjZXNzOiAoe2NvbmZpcm19KSA9PiBjb25maXJtICYmIHRoaXMuX2RvQXVpdChpc09rLCBpbmRleClcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBfZG9BdWl0KGlzT2s6IGJvb2xlYW4sIGluZGV4OiBudW1iZXIpIHtcclxuICAgICAgICBjb25zdCB7YXVkaXRpbmcsIHJlZnVzZSwgam9pbn0gPSB0aGlzLmRhdGE7XHJcblxyXG4gICAgICAgIHJlcXVlc3Qoe1xyXG4gICAgICAgICAgICB1cmw6ICcvYXBpL2FjdGl2aXR5L3BhcnRpY2lwYXRpb24vYXVkaXQnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBmbGFnOiBpc09rLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZpdHlJZDogdGhpcy5pZCxcclxuICAgICAgICAgICAgICAgIHVzZXJJZDogYXVkaXRpbmdbaW5kZXhdLnVzZXJJZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHd4LnNob3dUb2FzdCh7dGl0bGU6ICfmk43kvZzmiJDlip8nIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gYXVkaXRpbmcuc3BsaWNlKGluZGV4LCAxKVswXTtcclxuICAgICAgICAgICAgaXRlbS5zdGF0dXMgPSBpc09rID8gU0lHTl9TVEFUVVMuQVdBSVQgOiBTSUdOX1NUQVRVUy5SRUZVU0U7XHJcbiAgICAgICAgICAgIChpc09rICA/IGpvaW4gOiByZWZ1c2UpLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RGF0YSEoe2F1ZGl0aW5nLCBqb2luLCByZWZ1c2V9KTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChjb25zb2xlLmxvZyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=